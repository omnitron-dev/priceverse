# Priceverse - Environment Variables Example
# Copy this file to .env and configure with your actual values
#
# NOTE: Double underscore (__) is used as separator for nested config paths.
# Example: PRICEVERSE_DATABASE__HOST -> { database: { host: '...' } }

# Application
PRICEVERSE_APP__NAME=priceverse
PRICEVERSE_APP__VERSION=2.0.0
PRICEVERSE_APP__ENVIRONMENT=development
PRICEVERSE_APP__PORT=3000
PRICEVERSE_APP__HOST=0.0.0.0

# Database (PostgreSQL)
PRICEVERSE_DATABASE__DIALECT=postgres
PRICEVERSE_DATABASE__HOST=localhost
PRICEVERSE_DATABASE__PORT=5432
PRICEVERSE_DATABASE__DATABASE=priceverse
PRICEVERSE_DATABASE__USER=postgres
PRICEVERSE_DATABASE__PASSWORD=postgres
PRICEVERSE_DATABASE__POOL__MIN=2
PRICEVERSE_DATABASE__POOL__MAX=20
PRICEVERSE_DATABASE__SSL=false
PRICEVERSE_DATABASE__SSL_REJECT_UNAUTHORIZED=true

# Redis
PRICEVERSE_REDIS__HOST=localhost
PRICEVERSE_REDIS__PORT=6379
PRICEVERSE_REDIS__PASSWORD=
PRICEVERSE_REDIS__DB=0

# API Configuration
PRICEVERSE_API__RATE_LIMIT__ENABLED=true
PRICEVERSE_API__RATE_LIMIT__WINDOW_MS=60000
PRICEVERSE_API__RATE_LIMIT__MAX_REQUESTS=100
PRICEVERSE_API__CACHE__PRICE_TTL=60
PRICEVERSE_API__CACHE__STALE_THRESHOLD=120000
PRICEVERSE_API__STREAMING__IDLE_TIMEOUT=60000
PRICEVERSE_API__STREAMING__MAX_QUEUE_SIZE=1000

# Exchanges
PRICEVERSE_EXCHANGES__ENABLED=binance,kraken,coinbase,okx,bybit,kucoin
PRICEVERSE_EXCHANGES__MAX_RECONNECT_ATTEMPTS=10
PRICEVERSE_EXCHANGES__RECONNECT_BASE_DELAY=1000
PRICEVERSE_EXCHANGES__MAX_RECONNECT_DELAY=30000
PRICEVERSE_EXCHANGES__TRADE_FLOW_TIMEOUT=60000

# CBR Rate Service
PRICEVERSE_CBR__URL=https://www.cbr.ru/scripts/XML_daily.asp
PRICEVERSE_CBR__CACHE_TTL=3600
PRICEVERSE_CBR__RETRY_ATTEMPTS=3
PRICEVERSE_CBR__RETRY_DELAY=5000

# Aggregation
PRICEVERSE_AGGREGATION__INTERVAL=10000
PRICEVERSE_AGGREGATION__WINDOW_SIZE=30000
PRICEVERSE_AGGREGATION__PAIRS=btc-usd,xmr-usd,eth-usd
PRICEVERSE_AGGREGATION__MAX_CONSECUTIVE_ERRORS=10
PRICEVERSE_AGGREGATION__ERROR_RESET_INTERVAL=60000

# Data Retention
PRICEVERSE_RETENTION__ENABLED=true
PRICEVERSE_RETENTION__PRICE_HISTORY_DAYS=7
PRICEVERSE_RETENTION__CANDLES_5MIN_DAYS=30
PRICEVERSE_RETENTION__CANDLES_1HOUR_DAYS=365
PRICEVERSE_RETENTION__CANDLES_1DAY_DAYS=0
PRICEVERSE_RETENTION__CLEANUP_SCHEDULE=0 3 * * *

# Alerts
PRICEVERSE_ALERTS__ENABLED=false
PRICEVERSE_ALERTS__WEBHOOK_URL=
PRICEVERSE_ALERTS__EMAIL__ENABLED=false
PRICEVERSE_ALERTS__EMAIL__TO=
PRICEVERSE_ALERTS__EMAIL__FROM=priceverse@localhost
PRICEVERSE_ALERTS__THRESHOLDS__EXCHANGE_DISCONNECTED_SECONDS=300
PRICEVERSE_ALERTS__THRESHOLDS__AGGREGATION_FAILURES=5
PRICEVERSE_ALERTS__THRESHOLDS__CBR_RATE_STALE_HOURS=3

# Logging
PRICEVERSE_LOGGING__LEVEL=info
PRICEVERSE_LOGGING__PRETTY=false

# Health Check
PRICEVERSE_HEALTH__ENABLED=true
PRICEVERSE_HEALTH__PATH=/health
PRICEVERSE_HEALTH__TIMEOUT=5000
